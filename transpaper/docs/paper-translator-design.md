# 영문 논문 → 한국어 논문 PDF 번역 에이전트 설계서

---

## 1. 작업 컨텍스트

### 1.1 배경 및 목적

영문 학술 논문(PDF)을 한국어로 번역하여, 깔끔한 보고서 수준의 한국어 PDF를 생성한다. 원문의 정확한 레이아웃 재현보다는 **구조적 유사성**과 **가독성**을 우선한다. 번역된 논문은 아카이빙 목적으로 보관된다.

### 1.2 범위

- **대상 분야**: 사회과학 / 경영 분야 논문
- **대상 포맷**: 영문 학술 논문 PDF (텍스트 기반, 스캔본 제외)
- **대상 규모**: 10–15페이지 수준 (일반 학회/저널 논문)
- **논문 출처**: 다양한 출판사/학회 (특정 포맷에 의존하지 않음)
- **사용 빈도**: 주 1–2편
- **처리 단위**: 한 번에 1편 (배치 모드는 향후 추가)
- **범위 외**: 수식 중심 논문, 스캔 이미지 기반 PDF, 비논문 문서

### 1.3 실행 환경

| 항목 | 내용 |
|------|------|
| **실행 환경** | 로컬 Mac + Claude Code CLI |
| **실행 트리거** | 자연어 지시 (예: "input 폴더의 논문을 번역해줘") |
| **Human Review** | Claude Code 대화창에서 직접 수정 지시 |
| **진행 보고** | 단계(Step) 전환 시에만 보고 |
| **에이전트 판단** | 자동 처리 (도구 선택 등 중간 과정은 보고하지 않고 결과만 표시) |

### 1.4 입출력 정의

| 구분 | 설명 |
|------|------|
| **입력** | 영문 논문 PDF 파일 (`/input/` 폴더에 위치) |
| **출력** | 한국어 번역 논문 PDF (`/output/translated_paper.pdf`) — A4 용지, 단일 컬럼, 깔끔한 보고서 스타일 |
| **중간 산출물** | 추출 이미지 파일, 섹션별 번역 텍스트, 구조 메타데이터, 용어 맵 |

### 1.5 제약조건

- 학술 전문용어(고유명사, 이론명, 방법론명 등)는 원어 그대로 유지 (예: Transformer, Grounded Theory, OLS)
- 표(table), 그림(figure), 다이어그램 등 비텍스트 요소는 원본 이미지를 그대로 사용 (표 내 텍스트는 번역하지 않음)
- 이미지 추출 후 사람 검토 단계와 최종 번역 결과물 검토 단계, 총 2회의 Human Review 포함
- 병렬 번역 시 섹션(챕터) 단위로 분할
- 번역 범위: Abstract ~ Conclusion + References만 포함 (Acknowledgments, Appendix, Author Bio 등 부수 섹션은 제외)
- 각주(footnote)는 본문 인라인 처리 (괄호로 삽입)
- 중단/재개 기능 필수 — `state.json`으로 세부 진행상황 기록

### 1.6 용어 정의

| 용어 | 의미 |
|------|------|
| **구조 메타데이터** | 논문의 섹션 계층, 제목, 본문, 캡션, 각주 등의 구조 정보를 담은 JSON |
| **시각 요소** | 표(table), 그림(figure), 다이어그램, 차트 등 비텍스트 콘텐츠 |
| **섹션** | 논문의 최상위 구분 단위 (Abstract, Introduction, Literature Review, Methodology 등) |
| **재구성 방식** | 원문 PDF를 직접 수정하지 않고, 파싱한 구조를 기반으로 한국어 PDF를 새로 생성하는 방식 |
| **용어 맵** | 논문 내 주요 학술 용어와 그 번역을 매핑한 JSON. 병렬 번역 시 일관성 보장 |
| **전역 용어집** | 논문 간 일관성을 위해 누적 관리되는 용어 번역 사전 (`translation_glossary.md`) |

---

## 2. 워크플로우 정의

### 2.1 전체 흐름

```
[Step 1] PDF 지정 및 구조 파싱 + 용어 스캔
    ↓
[Step 2] 시각 요소(표/그림) 추출
    ↓
[Step 3] 🧑 Human Review — 추출 이미지 검토
    ↓ (승인)
[Step 4] 섹션별 번역 (병렬 가능)
    ↓
[Step 5] 번역 결과 취합 및 PDF 재구성
    ↓
[Step 6] 🧑 Human Review — 최종 검토 및 수정
    ↓
[완료] 최종 한국어 PDF 저장 + 용어집 업데이트
```

### 2.2 단계별 상세

---

#### Step 1: PDF 지정 및 구조 파싱 + 용어 스캔

| 항목 | 내용 |
|------|------|
| **처리 주체** | 스크립트 + 에이전트 판단 |
| **입력** | 영문 논문 PDF 파일 경로 |
| **처리 내용** | ① 스크립트: PDF에서 텍스트 추출 (에이전트가 적절한 도구 선택) ② 스크립트: 페이지별 원시 텍스트 및 좌표 정보 추출 ③ 에이전트: 추출된 텍스트를 분석하여 논문 구조 파싱 (섹션 계층, 제목/본문/캡션/각주/참고문헌 구분, 2단 컬럼 처리) ④ 에이전트: 구조 메타데이터 JSON 생성 ⑤ **에이전트: 논문 전체를 스캔하여 주요 학술 용어를 식별하고, 전역 용어집과 대조하여 용어 맵(term_map.json) 생성** |
| **출력** | `/output/structure.json` + `/output/term_map.json` |
| **성공 기준** | 모든 섹션 제목이 식별됨, 본문 텍스트 누락 없음, 시각 요소 위치가 매핑됨, 용어 맵 생성됨 |
| **검증 방법** | 규칙 기반 (섹션 수 > 0, 각 섹션에 본문 존재) + LLM 자기 검증 (구조가 논문 형식에 부합하는지) |
| **실패 시** | 다단계 폴백 (아래 참조) → 최종 실패 시 에스컬레이션 |

**파싱 다단계 폴백 전략**:
```
1차: pdfplumber로 텍스트 + 좌표 추출 시도
  ↓ (실패 시)
2차: PyMuPDF(fitz)로 텍스트 블록 기반 추출 시도
  ↓ (실패 시)
3차: OCR(Tesseract)로 이미지 기반 텍스트 추출 시도
  ↓ (실패 시)
에스컬레이션: 사용자에게 문제 보고 및 구조 힌트 요청
```
> 도구 선택은 에이전트에게 위임하며, 에이전트는 자동으로 최적의 도구를 판단하여 처리한다.

**용어 맵 스키마 (예시)**:
```json
{
  "paper_id": "논문 식별자",
  "terms": [
    {
      "original": "Organizational Citizenship Behavior",
      "abbreviation": "OCB",
      "translated": "조직시민행동",
      "keep_original": false,
      "source": "glossary"
    },
    {
      "original": "Grounded Theory",
      "abbreviation": null,
      "translated": null,
      "keep_original": true,
      "source": "rule"
    }
  ]
}
```

**구조 메타데이터 스키마 (예시)**:
```json
{
  "title": "원문 논문 제목",
  "authors": ["Author A", "Author B"],
  "affiliations": ["University A", "University B"],
  "abstract": "...",
  "keywords": ["keyword1", "keyword2"],
  "sections": [
    {
      "id": "sec_1",
      "level": 1,
      "title": "Introduction",
      "content": "본문 텍스트...",
      "footnotes": [
        {
          "id": "fn_1",
          "marker": "1",
          "content": "각주 텍스트..."
        }
      ],
      "subsections": [...],
      "figures": [
        {
          "id": "fig_1",
          "type": "figure",
          "caption": "Figure 1. ...",
          "page": 3,
          "image_path": "/output/images/fig_1.png",
          "position_hint": "after_paragraph_2"
        }
      ]
    }
  ],
  "references": "참고문헌 텍스트..."
}
```

---

#### Step 2: 시각 요소 추출

| 항목 | 내용 |
|------|------|
| **처리 주체** | 스크립트 |
| **입력** | 원문 PDF + `structure.json`의 시각 요소 위치 정보 |
| **처리 내용** | ① 각 표/그림/다이어그램 영역을 crop하여 이미지로 저장 ② 캡션 텍스트를 별도 추출하여 이미지 메타데이터에 포함 ③ 추출 결과 매니페스트 생성 |
| **출력** | `/output/images/` 폴더 (fig_1.png, table_1.png 등) + `/output/images_manifest.json` |
| **성공 기준** | `structure.json`에 기록된 모든 시각 요소에 대응하는 이미지 파일이 존재 |
| **검증 방법** | 규칙 기반 (매니페스트의 항목 수 == structure.json의 시각 요소 수, 각 파일 존재 확인, 이미지 크기 > 0) |
| **실패 시** | 자동 재시도 1회 (crop 영역 조정) → 실패 시 에스컬레이션 |

---

#### Step 3: 🧑 Human Review — 추출 이미지 검토

| 항목 | 내용 |
|------|------|
| **처리 주체** | 사람 (Claude Code 대화창에서 직접) |
| **입력** | `/output/images/` 폴더의 추출 이미지 + 매니페스트 |
| **검토 내용** | ① 누락된 시각 요소가 없는지 확인 ② 잘린 이미지, 품질 불량 이미지 확인 ③ 필요 시 수동으로 이미지 교체/추가 |
| **피드백 방식** | Claude Code 대화창에서 자연어로 수정 지시 (예: "그림 3이 잘렸다", "표 2가 누락됐다") |
| **출력** | 승인 신호 또는 수정 지시 |
| **성공 기준** | 사람이 "승인" 판단 |
| **실패 시** | 수정 지시에 따라 Step 2 부분 재실행 (지적된 이미지만 재추출) |

---

#### Step 4: 섹션별 번역

| 항목 | 내용 |
|------|------|
| **처리 주체** | 에이전트 (LLM 직접 번역) |
| **입력** | `structure.json`의 각 섹션 텍스트 + `term_map.json` (용어 맵) + `translation_glossary.md` (전역 용어집) |
| **처리 내용** | ① 메인 에이전트가 섹션 목록을 확인하고 번역 작업을 분배 ② 각 섹션을 번역 서브에이전트에 할당 (양이 많으면 병렬 실행) ③ 용어 맵과 전역 용어집을 모든 서브에이전트에 전달하여 번역 일관성 보장 ④ 번역 규칙 적용 (아래 상세 참조) ⑤ 참고문헌(References)은 번역하지 않고 원문 유지 |
| **출력** | `/output/translated/sec_1.json`, `sec_2.json`, ... (섹션별 번역 결과) |
| **성공 기준** | 모든 섹션이 번역됨, 원문 대비 누락 단락 없음, 전문용어 원어 유지 규칙 준수 |
| **검증 방법** | 규칙 기반 (번역 파일 수 == 원문 섹션 수, 각 파일 비어있지 않음) + LLM 자기 검증 (번역 품질 셀프체크 — 누락, 오역, 용어 규칙 위반 확인) |
| **실패 시** | 자동 재시도 1회 (검증 피드백 포함하여 재번역) → 실패 시 에스컬레이션 |

**번역 지침 핵심 규칙**:

| 항목 | 규칙 | 예시 |
|------|------|------|
| **문체** | 논문 정식 문체 (~이다, ~하였다) | "본 연구는 조직행동에 미치는 영향을 분석하였다." |
| **제목** | 한국어 번역 + 원어 병기 | "리더십이 조직 성과에 미치는 영향 (The Impact of Leadership on Organizational Performance)" |
| **저자/기관** | 원문 그대로 유지 | "John Smith, Harvard University" |
| **초록** | 한국어 번역만 (원문 영어 초록 미포함) | |
| **키워드** | 한국어 번역 + 원어 병기 | "조직시민행동(Organizational Citizenship Behavior), 리더십(Leadership)" |
| **전문용어** | 이론명, 방법론명, 고유명사는 원어 유지 | Grounded Theory, OLS, Transformer |
| **약어** | 처음 등장 시 "풀네임(약어)" 원어 표기, 이후 약어만 | "Organizational Citizenship Behavior(OCB)" → 이후 "OCB" |
| **인용 표기** | (Author, Year) 형태 원문 유지 | (Smith, 2023) |
| **교차 참조** | 자동 변환 | "Figure 3" → "그림 3", "Table 2" → "표 2", "Section 2.1" → "제2.1절" |
| **캡션** | 레이블 번역 + 설명 한국어 | "Figure 1." → "그림 1.", 나머지 설명은 한국어로 |
| **각주** | 본문 인라인 (괄호 삽입) | "... 분석하였다(본 연구에서는 X를 Y로 정의한다)." |
| **수식** | 텍스트 형태로 유지 | "Y = α + βX + ε" |
| **참고문헌** | 번역하지 않음, 원문 유지 | |
| **번역 범위** | Abstract ~ Conclusion + References | Acknowledgments, Appendix, Author Bio 제외 |

---

#### Step 5: 번역 결과 취합 및 PDF 재구성

| 항목 | 내용 |
|------|------|
| **처리 주체** | 스크립트 + 에이전트 판단 |
| **입력** | 섹션별 번역 결과 + 추출 이미지 + 구조 메타데이터 |
| **처리 내용** | ① 스크립트: 번역된 섹션들을 구조 메타데이터 순서대로 취합 ② 스크립트: PDF 생성 도구(에이전트가 적절한 도구 선택)를 사용하여 PDF 생성 — 제목(한국어+원어)/저자, 초록, 본문 섹션, 시각 요소 삽입, 캡션 배치, 참고문헌 ③ 에이전트: 생성된 PDF의 레이아웃 적절성 판단 ④ 한글 폰트 설정 (Noto Sans KR 또는 사용 가능한 한글 폰트) |
| **출력** | `/output/translated_paper.pdf` |
| **성공 기준** | PDF가 정상 생성됨, 모든 섹션 포함, 모든 시각 요소 삽입됨, 한글 정상 렌더링 |
| **검증 방법** | 규칙 기반 (PDF 페이지 수 > 0, 파일 크기 정상) + 스크립트 검증 (한글 폰트 임베딩 확인, 이미지 삽입 수 확인) |
| **실패 시** | 자동 재시도 1회 (레이아웃 파라미터 조정) → 실패 시 에스컬레이션 |

**출력 PDF 사양**:

| 항목 | 사양 |
|------|------|
| **용지 크기** | A4 (210×297mm) |
| **레이아웃** | 단일 컬럼, 깔끔한 보고서 스타일 |
| **헤더/푸터** | 없음 (페이지 번호도 없음) |
| **폰트** | Noto Sans KR (또는 사용 가능한 한글 폰트) |
| **PDF 생성 도구** | 에이전트가 최적의 도구 판단 (reportlab, WeasyPrint, LaTeX 등) |
| **시각 요소** | 이미지 원본 그대로 삽입 (표 내용 번역 없음) |

---

#### Step 6: 🧑 Human Review — 최종 검토 및 수정

| 항목 | 내용 |
|------|------|
| **처리 주체** | 사람 + 에이전트 (수정 반영) |
| **입력** | `/output/translated_paper.pdf` |
| **검토 내용** | ① 번역 품질 (오역, 어색한 표현) ② 레이아웃 (그림 위치, 텍스트 잘림, 폰트) ③ 누락 사항 |
| **피드백 방식** | Claude Code 대화창에서 자연어로 수정 지시 (예: "Section 2의 두 번째 문단 오역", "그림 위치 조정") |
| **출력** | 승인 또는 수정 지시 |
| **수정 처리** | 에이전트가 지적된 **섹션 전체를 재번역** → Step 5 부분 재실행 (해당 섹션만 교체하여 PDF 재생성) |
| **성공 기준** | 사람이 최종 "승인" 판단 |
| **실패 시** | 수정 지시에 따라 해당 부분만 재처리 (반복) |

---

#### 완료: 용어집 자동 업데이트

번역 완료 및 최종 승인 후, 이번 번역에서 새로 등장한 용어를 **자동으로** 전역 용어집(`translation_glossary.md`)에 추가한다.

---

### 2.3 LLM 판단 영역 vs 코드 처리 영역 정리

| 에이전트(LLM)가 직접 수행 | 스크립트로 처리 |
|--------------------------|----------------|
| 논문 구조 파싱 (섹션 경계, 계층 판단) | PDF 텍스트/좌표 추출 (에이전트 도구 선택) |
| 용어 스캔 및 용어 맵 생성 | 이미지 crop/저장 |
| 번역 (영→한 학술 번역) | PDF 생성 (에이전트 도구 선택) |
| 번역 품질 자기 검증 | 파일 I/O, JSON 읽기/쓰기 |
| 생성 PDF 레이아웃 적절성 판단 | 검증 스크립트 (파일 존재, 스키마 체크) |
| 수정 지시 해석 및 섹션 재번역 | |
| 파싱/PDF생성 도구 선택 판단 | |

### 2.4 상태 전이 다이어그램

```
INIT → PARSING → EXTRACTING → AWAITING_IMAGE_REVIEW
  → TRANSLATING → ASSEMBLING → AWAITING_FINAL_REVIEW
  → REVISING (수정 있을 시) → ASSEMBLING → AWAITING_FINAL_REVIEW
  → GLOSSARY_UPDATE → DONE
```

각 상태 전이 시 `/output/state.json`에 현재 상태와 완료된 단계를 기록하여, 중단 후 재개 가능하게 한다.

**state.json 스키마 (예시)**:
```json
{
  "current_state": "TRANSLATING",
  "completed_steps": ["PARSING", "EXTRACTING", "AWAITING_IMAGE_REVIEW"],
  "step_details": {
    "TRANSLATING": {
      "total_sections": 5,
      "completed_sections": ["sec_1", "sec_2", "sec_3"],
      "pending_sections": ["sec_4", "sec_5"]
    }
  },
  "paper_title": "원문 제목",
  "started_at": "2026-02-16T10:00:00Z",
  "last_updated": "2026-02-16T10:15:00Z"
}
```

> **중단/재개**: 세션이 끊어져도 `state.json`을 읽어 완료된 부분은 건너뛰고 이어서 처리. 번역 중간 중단 시 완료된 섹션은 보존하고 미완료 섹션부터 재개.

---

## 3. 구현 스펙 (구조 개요)

### 3.1 폴더 구조

```
/project-root
├── CLAUDE.md                          # 메인 에이전트 지침 (오케스트레이터)
├── /.claude
│   ├── /skills
│   │   ├── /pdf-parser
│   │   │   ├── SKILL.md               # PDF 파싱 스킬 지침
│   │   │   └── /scripts
│   │   │       ├── extract_text.py     # 텍스트 + 좌표 추출
│   │   │       └── extract_images.py   # 시각 요소 crop/저장
│   │   ├── /pdf-builder
│   │   │   ├── SKILL.md               # PDF 생성 스킬 지침
│   │   │   ├── /scripts
│   │   │   │   └── build_pdf.py       # PDF 생성 스크립트
│   │   │   └── /references
│   │   │       └── layout_spec.md     # 레이아웃 규격 (여백, 폰트, 줄간격 등)
│   │   └── /validator
│   │       ├── SKILL.md               # 검증 스킬 지침
│   │       └── /scripts
│   │           ├── validate_structure.py   # 구조 메타데이터 스키마 검증
│   │           ├── validate_images.py      # 이미지 추출 완전성 검증
│   │           └── validate_pdf.py         # 최종 PDF 무결성 검증
│   └── /agents
│       └── /translator
│           └── AGENT.md               # 번역 서브에이전트 지침
├── /input                             # 번역할 원문 PDF
├── /output                            # 모든 산출물
│   ├── /images                        # 추출된 시각 요소
│   ├── /translated                    # 섹션별 번역 결과
│   ├── structure.json                 # 구조 메타데이터
│   ├── term_map.json                  # 논문별 용어 맵
│   ├── images_manifest.json           # 이미지 추출 매니페스트
│   ├── state.json                     # 워크플로우 상태
│   └── translated_paper.pdf           # 최종 산출물
└── /docs                              # 참고 문서
    └── translation_glossary.md        # 전역 용어집 (논문 간 누적 관리)
```

### 3.2 CLAUDE.md 핵심 섹션 목록

1. **역할 정의**: 논문 번역 워크플로우 오케스트레이터
2. **워크플로우 단계**: 6단계 흐름 및 상태 관리
3. **판단 기준**: 구조 파싱 시 섹션 식별 규칙, 번역 품질 기준
4. **서브에이전트 호출 규칙**: translator 에이전트 호출 조건 및 입출력
5. **스킬 호출 규칙**: 각 스킬의 트리거 조건
6. **Human Review 프로토콜**: Claude Code 대화창에서 수정 지시 수신 및 처리 방법
7. **에러 처리**: 각 단계별 실패 시 대응 (다단계 폴백 포함)
8. **상태 관리**: `state.json` 업데이트 규칙, 중단/재개 프로토콜
9. **용어 관리**: 전역 용어집 참조 및 자동 업데이트 규칙

### 3.3 에이전트 구조

**멀티 에이전트 (메인 + 서브에이전트 1종)**

서브에이전트 분리 근거: 번역 작업은 도메인 지식(번역 규칙, 용어 처리, 문체 지침)이 많고, 병렬 실행이 필요하며, 메인 에이전트의 오케스트레이션 지침과 혼재되면 컨텍스트 윈도우가 비효율적으로 사용됨.

#### 메인 에이전트 (CLAUDE.md) — 오케스트레이터

| 항목 | 내용 |
|------|------|
| **역할** | 전체 워크플로우 관리, 스킬 호출, 서브에이전트 조율, Human Review 중개 |
| **직접 수행** | 논문 구조 파싱, 용어 스캔/맵 생성, 생성 PDF 레이아웃 검토, 수정 지시 해석, 도구 선택 판단 |
| **위임** | 번역 → translator 서브에이전트 |

#### 서브에이전트: translator

| 항목 | 내용 |
|------|------|
| **이름** | translator |
| **역할** | 섹션 단위 영→한 학술 번역 수행 |
| **트리거** | 메인 에이전트가 Step 4에서 섹션 텍스트와 함께 호출 |
| **입력** | 섹션 텍스트, 번역 규칙, 용어 맵(`term_map.json`), 전역 용어집 |
| **출력** | 번역된 섹션 텍스트 → `/output/translated/sec_{id}.json` |
| **참조 스킬** | 없음 (번역은 LLM 네이티브 능력) |
| **데이터 전달** | 소규모 섹션: 프롬프트 인라인 / 대규모 섹션: 파일 기반 (`/output/` 경로 전달) |
| **병렬 실행** | 섹션이 5개 이상일 경우 병렬 실행 권장 (각 인스턴스가 독립 섹션 처리) |

### 3.4 스킬/스크립트 파일 목록

| 스킬 | 역할 | 트리거 조건 | 포함 스크립트 |
|------|------|-------------|--------------|
| **pdf-parser** | 원문 PDF에서 텍스트, 좌표, 이미지를 추출 | Step 1 (텍스트 추출), Step 2 (이미지 추출) | `extract_text.py`, `extract_images.py` |
| **pdf-builder** | 번역 결과 + 이미지를 조합하여 한국어 PDF 생성 | Step 5 (PDF 재구성), Step 6 (부분 수정 후 재생성) | `build_pdf.py` |
| **validator** | 각 단계의 산출물 무결성 검증 | Step 1 완료 후, Step 2 완료 후, Step 5 완료 후 | `validate_structure.py`, `validate_images.py`, `validate_pdf.py` |

### 3.5 주요 산출물 파일 형식

| 산출물 | 형식 | 설명 |
|--------|------|------|
| `structure.json` | JSON | 논문 구조 메타데이터 (섹션, 시각 요소 위치, 계층 정보, 각주) |
| `term_map.json` | JSON | 논문별 용어 맵 (주요 학술 용어와 번역 매핑) |
| `images_manifest.json` | JSON | 추출 이미지 목록 (ID, 파일 경로, 원본 페이지, 캡션) |
| `/images/*.png` | PNG | crop된 표/그림/다이어그램 이미지 |
| `/translated/sec_*.json` | JSON | 섹션별 번역 결과 (번역문, 메타정보) |
| `state.json` | JSON | 워크플로우 상태 (현재 단계, 완료 섹션, 타임스탬프) |
| `translated_paper.pdf` | PDF | 최종 한국어 번역 논문 |

### 3.6 기술 스택

| 용도 | 도구/라이브러리 |
|------|----------------|
| PDF 텍스트 추출 | pdfplumber (1차) → PyMuPDF/fitz (2차) → Tesseract OCR (3차) |
| PDF 이미지 추출 | pdf2image + Pillow (crop), 또는 PyMuPDF 내장 기능 |
| PDF 생성 | 에이전트 판단 (reportlab / WeasyPrint / LaTeX 중 선택) |
| 한글 폰트 | Noto Sans KR (Google Fonts, OFL 라이선스) |
| 데이터 형식 | JSON |
| 언어 | Python 3 |
| 번역 엔진 | Claude (에이전트 직접 수행) |

### 3.7 용어집 관리

**전역 용어집 (`/docs/translation_glossary.md`)**:
- 논문 번역 시 누적 업데이트되는 용어 사전
- 번역 완료 후 새로 등장한 용어가 **자동으로** 추가됨
- 형식 예시:

```markdown
# Translation Glossary

## 경영학 / Management
| 원어 | 한국어 번역 | 비고 |
|------|-------------|------|
| Organizational Citizenship Behavior | 조직시민행동 | 약어: OCB |
| Transformational Leadership | 변혁적 리더십 | |
| Job Satisfaction | 직무만족 | |

## 사회과학 / Social Science
| 원어 | 한국어 번역 | 비고 |
|------|-------------|------|
| Social Capital | 사회적 자본 | |
| Institutional Theory | 제도이론 | |
```

**용어 처리 흐름**:
1. Step 1에서 논문 전체를 스캔하여 주요 학술 용어 식별
2. 전역 용어집과 대조하여 이미 등록된 용어는 기존 번역 사용
3. 새로운 용어는 에이전트가 번역을 결정하고 `term_map.json`에 기록
4. `term_map.json`을 모든 번역 서브에이전트에 전달하여 일관성 보장
5. 최종 승인 후 새 용어를 전역 용어집에 자동 추가

---

## 4. MVP 계획

### 4.1 MVP 범위 (핵심 먼저)

**Phase 1 — 핵심 파이프라인**:
- Step 1: PDF 구조 파싱 (pdfplumber 기반, 폴백 없이 단일 도구)
- Step 4: 섹션별 번역 (서브에이전트, 순차 실행)
- Step 5: PDF 재구성 (단일 컬럼, 보고서 스타일)
- 기본 상태 관리 (Step 단위)

**Phase 2 — 시각 요소 및 리뷰**:
- Step 2: 시각 요소 추출
- Step 3: Human Review (이미지 검토)
- Step 6: Human Review (최종 검토)
- 섹션 단위 재번역

**Phase 3 — 고급 기능**:
- 다단계 파싱 폴백 (pdfplumber → PyMuPDF → OCR)
- 용어집 관리 (전역 용어집 + 용어 맵 + 자동 업데이트)
- 병렬 번역 (섹션 5개 이상 시)
- 세부 상태 관리 (섹션 단위 중단/재개)
- 보호된 PDF 에러 처리

### 4.2 주요 리스크 및 완화 전략

| 리스크 | 영향 | 완화 전략 |
|--------|------|-----------|
| **다양한 PDF 포맷의 파싱 실패** (가장 큰 우려) | 워크플로우 전체 중단 | 다단계 폴백 (pdfplumber → PyMuPDF → OCR), 에이전트가 파싱 전략 자율 선택 |
| 병렬 번역 시 용어 불일치 | 번역 품질 저하 | 사전 용어 스캔 + 용어 맵을 모든 서브에이전트에 전달 |
| 보호된 PDF 텍스트 추출 실패 | 특정 PDF 처리 불가 | 에러 감지 후 사용자에게 알림, OCR 폴백 |
| 세션 중단 시 작업 손실 | 재작업 비용 | `state.json`으로 세부 진행상황 기록, 섹션 단위 재개 |

---

## 부록: 워크플로우 단계별 요약표

| Step | 이름 | 처리 주체 | 성공 기준 | 검증 방법 | 실패 처리 |
|------|------|-----------|-----------|-----------|-----------|
| 1 | 구조 파싱 + 용어 스캔 | 스크립트 + 에이전트 | 모든 섹션 식별, 텍스트 누락 없음, 용어 맵 생성 | 규칙 + LLM 자기 검증 | 다단계 폴백 → 에스컬레이션 |
| 2 | 시각 요소 추출 | 스크립트 | 모든 요소 대응 이미지 존재 | 규칙 기반 | 재시도 1회 → 에스컬레이션 |
| 3 | 이미지 검토 | 사람 (대화창) | 사람 승인 | 사람 검토 | 수정 지시 → Step 2 부분 재실행 |
| 4 | 섹션별 번역 | 에이전트 (translator) | 전 섹션 번역, 용어 규칙 준수 | 규칙 + LLM 자기 검증 | 재시도 1회 → 에스컬레이션 |
| 5 | PDF 재구성 | 스크립트 + 에이전트 | PDF 정상 생성, 한글 렌더링 | 규칙 + 스크립트 검증 | 재시도 1회 → 에스컬레이션 |
| 6 | 최종 검토 | 사람 (대화창) + 에이전트 | 사람 최종 승인 | 사람 검토 | 섹션 단위 재번역 → 재처리 |
| 완료 | 용어집 업데이트 | 에이전트 | 새 용어 전역 용어집에 추가됨 | 규칙 기반 | - |

---

## 부록: 인터뷰 결과 요약

설계 확정을 위해 수행된 심층 인터뷰(9라운드)의 핵심 결정사항:

| 질문 영역 | 결정 | 근거/비고 |
|-----------|------|-----------|
| 실행 환경 | 로컬 Mac + Claude Code CLI | 별도 웹 UI 없음 |
| Human Review 방식 | Claude Code 대화창에서 직접 자연어 지시 | 파일 기반 리뷰 불필요 |
| 논문 규모 | 10–15페이지 | 일반 학회/저널 논문 수준 |
| 레이아웃 충실도 | 구조만 유사, 깔끔한 보고서 수준 | 2단 컬럼 재현 불필요 |
| 출력 PDF 스타일 | A4, 단일 컬럼, 헤더/푸터/페이지번호 없음 | |
| PDF 생성 도구 | 에이전트 위임 | reportlab/WeasyPrint/LaTeX 중 자율 선택 |
| PDF 파싱 도구 | 에이전트 위임 + 다단계 폴백 | pdfplumber → PyMuPDF → OCR |
| 표(table) 처리 | 이미지 그대로 삽입 (번역 안 함) | |
| 각주 처리 | 본문 인라인 (괄호 삽입) | |
| 번역 문체 | 논문 정식 문체 (~이다, ~하였다) | |
| 제목 번역 | 한국어 + 원어 병기 | |
| 저자/기관 | 원문 그대로 유지 | |
| 초록 | 한국어만 | 영문 초록 미포함 |
| 키워드 | 번역 + 원어 병기 | |
| 교차 참조 | 자동 변환 (Figure→그림, Table→표, Section→제X절) | |
| 수식 | 텍스트로 유지 | |
| 부수 섹션 | 제외 (Acknowledgments, Appendix, Bio) | Abstract~Conclusion + References만 |
| 수정 단위 | 섹션 단위 재번역 | |
| 용어 관리 | 전역 용어집 + 사전 스캔 (Step 1에서 함께) | |
| 용어집 업데이트 | 번역 후 자동 추가 | |
| 병렬 일관성 | 용어 맵을 모든 서브에이전트에 전달 | |
| 진행 보고 | 단계(Step) 전환 시에만 | |
| 판단 보고 | 자동 처리 (결과만 표시) | |
| 중단/재개 | 필수 (state.json 세부 기록) | |
| 비용 | 무관 (품질 우선) | |
| 사용 빈도 | 주 1–2편 | |
| 배치 처리 | 향후 추가 (현재 1편씩) | |
| 아카이빙 | 단순 output 폴더 | |
| 논문 출처 | 다양 (특정 포맷 의존 없음) | |
| PDF 보호 | 간혹 있음 (에러 처리 필요) | |
| 테스트 PDF | 준비됨 | |
| MVP 전략 | 핵심 먼저 (파싱→번역→PDF) | |
| 최대 우려사항 | 파싱 실패 | 다양한 논문 포맷 대응 |
